## サーバー側 graphql 導入

cd $(git rev-parse --show-toplevel)
mkdir server
cd server
npm init -yes
npm install apollo-server graphql
npm install --save-dev typescript ts-node-dev @graphql-codegen/cli
npx tsc -init
npm set-script server-start "ts-node-dev --watch schema.gql,data.json --respawn index.ts"
npm set-script server-generate "graphql-codegen --config codegen.yml --watch ./schema.gql"

npx graphql-codegen init
  ? What type of application are you building? Backend - API or server
  ? Where is your schema?: (path or url) http://localhost:4000
  ? Pick plugins: TypeScript (required by other typescript plugins), TypeScript Resolvers (strongly typed resolve
  functions)
  ? Where to write the output: src/generated/graphql.ts
  ? Do you want to generate an introspection file? Yes
  ? How to name the config file? codegen.yml
  ? What script in package.json should run the codegen? server-generate

npm install @graphql-codegen/typescript-resolvers @graphql-codegen/typescript

cat << EOF > config.yml
  ...
  ...
  ...
  

## クライアント側

npx --yes create-react-app client --template typescript
cd client

npm set-script client-start "npm run start"

npm install --save-dev @graphql-codegen/cli graphql
npm set-script client-start "react-scripts start"
npm set-script client-generate "graphql-codegen --config codegen.yml --watch src/\*_/_.tsx,../server/schema.gql"

npx graphql-codegen init
  ? What type of application are you building? Application built with React
  ? Where is your schema?: (path or url) http://localhost:4000
  ? Where are your operations and fragments?: src/\*_/_.graphql
  ? Pick plugins: TypeScript (required by other typescript plugins), TypeScript Operations (operations and
  fragments), TypeScript React Apollo (typed components and HOCs)
  ? Where to write the output: src/generated/graphql.tsx
  ? Do you want to generate an introspection file? No
  ? How to name the config file? codegen.yml
  ? What script in package.json should run the codegen? client-generate

npm install @graphql-codegen/typescript-react-query @graphql-codegen/typescript @graphql-codegen/typescript-operations

cat << EOF > config.yml
  ...
  ...
  ...

## file-server 導入

cd $(git rev-parse --show-toplevel)
mkdir server
cd server

npm init -yes
npm install http-server
npm set-script http-server-start "http-server"


## start.sh 作成


cat << EOF > start.sh
  ...
  ...
  ...

chmod +x start.sh